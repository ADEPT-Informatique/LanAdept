@model LanAdeptData.Model.Place

@{
	string classFirstDiv = "place";

	if (!Model.IsFree)
	{
		if (LanAdeptCore.Service.PlaceService.IsUserPlace(Model))
		{
			classFirstDiv += " place-actuelle";
		}
		else if (Model.IsOccupied)
		{
			classFirstDiv += " place-occupe";
		}
		else
		{
			classFirstDiv += " place-reserve";
		}
	}

	bool userHaveAPlace = LanAdeptCore.Service.PlaceService.HasUserPlace();
}

<div class="col-md-1 col-sm-2 col-xs-4 @classFirstDiv">
	@if (Html.HasActionPermission("Reserver") 
		&& Model.IsFree
		&& !userHaveAPlace)
	{
		<div class="hover" data-toggle="modal" data-target="#ModalReserverPlace" data-place-text="@Model" data-place-id="@Model.PlaceID">
			@Model
		</div>
	}
	else if (Html.HasActionPermission("Reserver")
		&& Model.IsFree	
		&& userHaveAPlace)
	{
		<div class="hover" data-toggle="modal" data-target="#ModalChangerPlace" data-place-text="@Model" data-place-id="@Model.PlaceID">
			@Model
		</div>
	}
	else
	{
		<div>
			@Model
		</div>
	}
</div>